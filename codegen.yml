hooks:
  afterAllFileWrite:
    - yarn eslint --fix --ignore-path .gitignore '**/*.gql.ts' || echo "1"
    - yarn prettier --ignore-path .gitignore --write
generates:
  # Generate a types package based on a default Magento GraphQL endpoint
  packages/magento-graphql/index.ts:
    schema:
      - ${MAGENTO_ENDPOINT}
      - 'packages/**/*.graphqls'
    plugins:
      - typescript
      - add
    config:
      enumsAsTypes: true
      content: '// Do not edit this file: autogenerated by graphql-code-generator'
  packages/magento-graphql/schema.graphqls:
    schema:
      - ${MAGENTO_ENDPOINT}
      - 'packages/**/*.graphqls'
    plugins:
      - schema-ast
      - add
    config:
      includeDirectives: true
      commentDescriptions: false
      content: '# Do not edit this file: autogenerated by graphql-code-generator'
  # Generate a .gql.ts files for each GraphQL query
  packages/:
    schema:
      - ${MAGENTO_ENDPOINT}
      - 'packages/**/*.graphqls'
    documents:
      - 'packages/**/*.graphql'
    plugins:
      - './packagesDev/graphql-codegen-relay-optimizer-plugin/dist/main/index.js'
      - typed-document-node
      - typescript-operations
      - add
    preset: './packagesDev/graphql-codegen-near-operation-file/dist/index.js'
    presetConfig:
      extension: .gql.ts
      baseTypesPath: ~@reachdigital/magento-graphql
    config:
      skipTypename: true
      dedupeOperationSuffix: true
      content: '// Do not edit this file: autogenerated by graphql-code-generator'
  examples/soxbase/generated/fragments.json:
    schema:
      - ${NEXT_PUBLIC_GRAPHQL_ENDPOINT}
      - 'examples/soxbase/**/*.graphqls'
      - 'packages/**/*.graphqls'
    plugins:
      - fragment-matcher
    config:
      apolloClientVersion: 3
  examples/soxbase/generated/types.ts:
    schema:
      - ${NEXT_PUBLIC_GRAPHQL_ENDPOINT}
      - 'packages/**/*.graphqls'
    documents:
      - 'packages/**/*.graphql'
    plugins:
      - typescript
      - add
    config:
      enumsAsTypes: true
      content: '// Do not edit this file: autogenerated by graphql-code-generator'
  examples/soxbase/:
    schema:
      - ${NEXT_PUBLIC_GRAPHQL_ENDPOINT}
      - 'examples/soxbase/**/*.graphqls'
      - 'packages/**/*.graphqls'
    documents:
      - 'packages/**/*.graphql'
      - 'examples/soxbase/**/*.graphql'
    plugins:
      - './packagesDev/graphql-codegen-relay-optimizer-plugin/dist/main/index.js'
      - typed-document-node
      - typescript-operations
      - add
    preset: './packagesDev/graphql-codegen-near-operation-file/dist/index.js'
    presetConfig:
      extension: .gql.ts
      baseTypesPath: generated/types.ts
    config:
      skipTypename: true
      dedupeOperationSuffix: true
      content: '// Do not edit this file: autogenerated by graphql-code-generator'
  examples/soxbase-api/generated/schema.graphqls:
    schema:
      - ${NEXT_PUBLIC_GRAPHQL_ENDPOINT}
      - 'packages/**/*.graphqls'
    plugins:
      - schema-ast
      - add
    config:
      includeDirectives: true
      commentDescriptions: false
      content: '# Do not edit this file: autogenerated by graphql-code-generator'
