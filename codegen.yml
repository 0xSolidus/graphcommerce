schema:
  - ${NEXT_PUBLIC_GRAPHQL_ENDPOINT}
  - 'packages/**/*.graphqls'
  - 'packagesDev/**/*.graphqls'
documents:
  - 'packages/**/*.graphql'
  - 'packagesDev/graphql-schema-test/*.graphql'
hooks:
  afterAllFileWrite:
    - prettier --write
generates:
  examples/soxbase/lib/fragments.json:
    plugins:
      - fragment-matcher
    hooks:
      afterOneFileWrite:
        - prettier --write
    config:
      apolloClientVersion: 3
  examples/soxbase-api/schema.graphql:
    plugins:
      - schema-ast
    config:
      includeDirectives: true
      commentDescriptions: false
  packages/magento-graphql/index.ts:
    plugins:
      - typescript
    config:
      flattenGeneratedTypes: true
      enumsAsTypes: true
  /:
    plugins:
      - '@reachdigital/graphql-codegen-relay-optimizer-plugin'
      - typed-document-node
      - typescript-operations
    preset: './packagesDev/graphql-codegen-near-operation-file/dist/index.js'
    presetConfig:
      extension: .graphql.ts
      baseTypesPath: ~@reachdigital/magento-graphql
    config:
      # flattenGeneratedTypes: true
      skipTypename: true
